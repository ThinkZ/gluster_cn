#Managing 目录配额

在 GlusterFS 目录配额允许您设置限制磁盘的使用情况
通过目录或卷的空间。存储管理员可以控制

一级目录和/或卷的磁盘空间利用率
通过将限制设置为在任何一级分配磁盘空间 GlusterFS
卷和目录层次结构。这是特别有用的在云

部署以方便实用计费模型。

> * * 注意 * *
> 现在，支持的只有硬限制。在这里，是不能的限制

> 超出并尝试使用更多的磁盘空间或集之外的 inode
> 限制被拒绝。

系统管理员还可以监视的资源利用率来限制
存储的用户根据他们在组织中的角色。

您可以在以下级别设置配额︰

-* * 目录级别 * * — — 限制目录级别的用法
-* * 卷级别 * * — — 限制使用音量级别

> * * 注意 * *
> 你可以在目录上设置磁盘限制，即使它不创造。
> 创建该目录后立即强制执行磁盘限制。

##Enabling 配额

您必须启用配额设置的磁盘空间限制。

* * 到启用配额: * *

-使用以下命令来启用配额︰

# gluster 卷配额启用

例如，若要启用测试卷上的配额︰

# gluster 卷配额测试卷启用
在 /test-volume 上启用配额

##Disabling 配额

如果需要您可以禁用配额。

* * 到禁用配额: * *

-使用下面的命令来禁用配额︰

# gluster 卷配额禁用

例如，若要禁用配额翻译测试卷上︰

# gluster 卷配额测试卷禁用
在 /test-volume 上禁用配额翻译

##Setting 或更换磁盘空间限制

您可以在您的存储环境中创建新的目录并设置
磁盘限制或设置的磁盘限制为现有目录。目录

名称应与具有出口目录/装载的卷
被视为"/"。

* * 到设置或替换磁盘限制: * *

-设置磁盘限制使用下面的命令︰

# gluster 卷配额限制使用 /

例如，若要在测试卷上的数据目录上设置限制在哪里
数据是导出的目录下的目录︰

# gluster 卷配额测试卷限制使用/数据 10 GB
使用限制设定已/数据

> * * 注意 * *
> 中多级目录层次结构，严格的磁盘限额
> 会考虑执法。

##Displaying 磁盘限制信息

您可以在上面的所有目录显示磁盘限制信息
该限制设置。

* * 到显示磁盘限制信息: * *

-在哪种限制上显示的所有目录的磁盘限额信息
设置，使用以下命令︰

# gluster 卷配额列表

例如，要查看设置的磁盘限制测试卷上︰

# gluster 卷配额测试卷列表
/ 测试/数据 10 GB 6 GB
/ 测试/data1 10 GB 4 GB

-在特定的目录上显示磁盘限制信息
设置了限制，使用以下命令︰

# gluster 卷配额列表

例如，要查看设置的限制上的测试卷/数据目录︰

# gluster 卷配额测试卷列表/数据
/ 测试/数据 10 GB 6 GB

# # #Displaying 配额限制信息使用 df 实用程序

您可以创建使用 df 实用考虑配额限制磁盘使用情况报告。要生成报告，请运行以下命令︰


# gluster 卷上设置 VOLNAME 配额认为 statfs

在这种情况下，该目录的总磁盘空间被认为是在卷的目录上设置的配额硬限制。

> * * 注意 * *
> 配额认为 statfs 的默认值是关闭。然而，它被建议设置配额-认为-statfs 对上。


下面的示例显示磁盘使用情况，配额认为 statfs 关闭时︰

# gluster 音量设置测试卷 features.quota 认为 statfs
卷组︰ 成功
# gluster 卷配额测试卷列表
硬限制软限制路径使用可用
-----------------------------------------------------------
/ GB 300.0 90年 %11.5 GB 288.5 GB
/ 约翰/下载 77.0 GB 75 %11.5 GB 65.5 GB

音量测试如在 client1 看到的磁盘使用情况︰

# df-羟色胺家目录
使用文件系统类型大小的效用使用 %安装在
server1: / 测试卷 fuse.glusterfs 400 12 389 G 3%家目录

下面的示例显示磁盘使用情况，对配额认为 statfs 时︰

# gluster 卷上设置测试卷 features.quota 认为 statfs
卷组︰ 成功
# gluster 卷配额测试卷列表
硬限制软限制路径使用可用
-----------------------------------------------------------
/ GB 300.0 90年 %11.5 GB 288.5 GB
/ 约翰/下载 77.0 GB 75 %11.5 GB 65.5 GB

音量测试如在 client1 看到的磁盘使用情况︰

# df-羟色胺家目录
使用文件系统类型大小的效用使用 %安装在
server1: / 测试卷 fuse.glusterfs 300 12 289 G 4%家目录

当设置为 on，配额认为 statfs 选项允许管理员来让用户可以查看可用的总磁盘空间的目录作为对它设置硬限制。

##Updating 内存高速缓存大小

# # # 设置超时

出于性能原因，配额将缓存在客户端上的目录大小。你

可以设置超时时间指示目录大小的最长有效期限
在缓存中，从时间来填充。

例如︰ 如果有多个客户端写入单个
目录，有一些其他的客户端可能会写到的机会
超出磁盘配额限制。然而，这个新的文件大小可能不会得到

反映在客户端，直到缓存中的条目的大小变得陈旧
由于超时。如果写操作在这此客户端上发生

持续时间，即使他们会导致超出允许他们
配额限制，因为在缓存大小不是同步的实际大小。
当超时发生时中高速缓存, 的大小从服务器更新，并将
同步和没有进一步的写操作将被允许。零超时将

力从每个操作的服务器读取的目录大小，
修改文件数据，并将有效地禁用目录缓存大小
客户端。

* * 到更新内存高速缓存大小: * *

-使用下面的命令来更新内存高速缓存大小︰

# gluster 音量设置 features.quota 超时

例如，若要上每隔 5 秒更新内存高速缓存大小
测试卷︰

# gluster 音量设置测试卷 features.quota-超时 5
集的卷成功

##Setting 警报时间

警报的时间是你使用信息被记录在你达到软限制后的频率。

* * 到设置警报时间: * *

-使用下面的命令来设置警报时间︰

# gluster 卷配额 VOLNAME 警报时间时间

> * * 注意 * *
>
> 默认警报时间是一个星期。

例如，要将警报的时间设置为一天︰

# gluster 容量配额测试卷警报-时间 1 d
卷配额︰ 成功

##Removing 磁盘空间限制

如果你再也不想配额，您可以删除设置的磁盘限额。

* * 到删除磁盘限制: * *

-使用下面的命令删除磁盘上设置的限制特定的目录︰

# gluster 卷配额删除

例如，若要删除/数据目录的磁盘限额
测试卷︰

# gluster 卷配额测试卷删除/数据
删除设置上/数据的使用限制
